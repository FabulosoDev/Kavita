<ng-container *ngIf="navService.sideNavVisible$ | async as sideNavVisible">

<div class="side-nav mt-3 ms-1 mb-3 {{sideNavVisible ? '' : 'closed'}}" *ngIf="accountService.currentUser$ | async as user">
    <app-side-nav-item icon="fa-user-circle align-self-center me-2 phone-hidden" [title]="user.username | sentenceCase">
        <ng-container actions>
            <!-- Todo: This will be customize dashboard/side nav controls-->
            <a routerLink="/preferences/" title="User Settings" style="color: white;"><i class="fa fa-cogs" style="color: white !important" aria-hidden="true"></i><span class="visually-hidden">User Settings</span></a>
        </ng-container>
    </app-side-nav-item>

    <div class="mt-3">
        <app-side-nav-item icon="fa-home" title="Home" routerLink="/library"></app-side-nav-item>
        <app-side-nav-item icon="fa-list" title="Collections" routerLink="/library" fragment="collections"></app-side-nav-item>
        <app-side-nav-item icon="fa-list-ol" title="Reading Lists" routerLink="/library" fragment="lists"></app-side-nav-item>
        <div class="mb-3" * ngIf="libraries.length > 10">
            <label for="filter" class="form-label">Filter</label>
            <div class="input-group">
                <input id="filter" autocomplete="off" class="form-control" [(ngModel)]="filterQuery" type="text" aria-describedby="reset-input">
                <!-- TODO: Make this a btn-close like search has-->
                <button class="btn btn-outline-secondary" type="button" id="reset-input" (click)="filterQuery = '';">Clear</button>
            </div>
        </div>
        <app-side-nav-item *ngFor="let library of libraries | filter: filterLibrary" (click)="handleClick($event, library)" [icon]="utilityService.getLibraryTypeIcon(library.type)" [title]="library.name">
            <ng-container actions>
                <app-card-actionables [actions]="actions" [labelBy]="library.name" iconClass="fa-ellipsis-v" (actionHandler)="performAction($event, library)"></app-card-actionables>
            </ng-container>
        </app-side-nav-item>
    </div>
</div>
</ng-container>